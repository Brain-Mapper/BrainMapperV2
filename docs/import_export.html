<!DOCTYPE html>
<html>
  <head>
    <title>User manual</title>
	<link rel="stylesheet" type="text/css" href="style.css">
  <link rel="icon" href="imgs/logo.png">
  </head>
  <body>
    <header class="w3-container w3-center w3-padding-32">
      <div class="row">
        <div class="column">
            <img src="imgs/logo.png" style="width:8%">
        </div>
        <div class="column">
          <h1><b>USER MANUAL</b></h1>
      	  <p>Welcome to the user manual for the <span class="w3-tag">BrainMapper</span> software.</p>
        </div>
      </div>
  	</header>

    <div class="row">
      <div class="column-left">
        <div class="w3-card w3-margin w3-margin-top">
          <div id="toc_container">
            <p class="toc_title">Contents - Import/Export</p>
            <a href="index.html" style="color : #5577ee"> Go back to home page </a>
            <ul class="toc_list">
        	   <li><a href="#workspace"><strong>5.1 Workspace</strong></a></li>
        	    <ul>
        		      <li><a href="#what">5.1.1 What is it?</a></li>
        		      <li><a href="#export_workspace">5.1.2 Export a workspace</a></li>
        		      <li><a href="#import_workspace">5.1.3 Import a workspace</a></li>
        	      </ul>
        	   <li><a href="#export"><strong>5.2 Export an Image Collection</strong></a></li>
        	    <ul>
        		      <li><a href="#export_nifti">5.2.1 As a NIfTI file</a></li>
        		      <li><a href="#export_csv">5.2.2 As a CSV file</a></li>
        	      </ul>
          </div>
        </div>
      </div>
      <div class="column-right">
        <div id="ImportExport">
          <h1> Import/Export</h1>
        	<h2 id="workspace">5.1 Workspace</h2>

			<h3 id="what">5.1.1 What is it?</h3>
			<p>
				A workspace is a folder containing data such as sets, subsets and image collections.
	        <ul>
  		      <li>A set is a folder containing NIfTI files (.nii or .nii.gz) or CSV files or Excel files or subsets.</li>
  		      <li>A subset is a folder inside a folder representing the parent set, containing NIfTI files (.nii or .nii.gz) or CSV files or Excel files or subsets.</li>
  		      <li>An image collection is a folder containing NIfTI files (.nii or .nii.gz) or CSV files or Excel files.</li>
  	      </ul>
			</p>

      <p>In this following example, Test_1 and Test_2 are sets. Test_11 and Test_12 are subsets of Test_1. Test_21 is a subset of Test_2.
        Test_121 is a subset of Test_12 and a sub-subset of Test_1.
        <br>
        Each set and subset contains NIfTI files.
      </p>

			<p>
        	<img src="imgs/import_export/ws.png" style="width:80%">
      </p>



			<h3 id="export_workspace">5.1.2 Export a workspace</h3>
			<p>
				To export your workspace, select the button "Workspace" in the menu. Then click on "Save workspace" and select a directory where the workspace will be saved.
			</p>

      <p>
        For example, if you have the following workspace, you can exported.
      </p>
      <p>
        <img src="imgs/import_export/ws2.png" style="width:80%">
      </p>

      <p>
        To do, you have to select "Save workspace" in "Workspace".
        Then you can create a folder "Workspace" like in the following example and select "Ouvrir" (or "Open" in english).
      </p>

      <p>
        <img src="imgs/import_export/ws_export.png" style="width:80%">
      </p>

      <p>
        After this exportation, you will have your exported workspace in the folder "Workspace" (for our example).
      </p>

      <p>
        <img src="imgs/import_export/ws_exported.png" style="width:80%">
      </p>

      <div style="padding-left: 12%; padding-top:3%; padding-bottom:3%">
        <div class="alert alert-info" role="alert">
        <h5 style="color:#f66;">WARNING</h5>
        <p>This operation will save all the NIfTI files on your computer. Please check that you have enough space on your computer before this operation, to prevent any damage.</p>
        </div>
      </div>

			<p>
				One you saved your workspace, you can exit the software.
			</p>


      <p>You will be able to import it again later, in another instance of the software. If you re-import it in the same instance, then you will have an error. That's because all your data is already in the software (and name the same way), even if you changed some things in it.</p>

      <p>
				We recommand to save your work when you are done and load your workspace when you come back at it, with another instance of the software.
			</p>

      <h3 id="import_workspace">5.1.3 Import workspace</h3>
			<p>
				To import your workspace, you have to select the button "Workspace" in the menu and then to click on "Import workspace".
			</p>
			<p> Then, choose a directory. This directory will be the root of your workspace. That mean all the data (sets, and image collections) will be in it, directly.
			</p>

      <p>
        If we get back the example used in the previous part, you must select "Import workspace" in "Workspace".
        Then, you have to choose which workspace you want to import.
        In the previous example, the workspace has been exported in the folder "Workspace".
        So you just have to open this folder, like in the following image.
      </p>

      <p>
        <img src="imgs/import_export/ws_export.png" style="width:80%">
      </p>

      <p>
        Then, in the BrainMapper main view, you will have this following setup.
      </p>

      <p>
        <img src="imgs/import_export/ws_imported.png" style="width:80%">
      </p>

      <div style="padding-left: 12%; padding-top:3%; padding-bottom:3%">
        <div class="alert alert-info" role="alert">
        <h5 style="color:#f66;">WARNING</h5>
        <p>
          To avoid any loss of data, a check will be made. If an error occurs, your workspace does not meet one of the following prerequisites:
  				<ul>
  					  <li>Some sets or subsets have the same name (in your workspace OR between your workspace and the current state of the software). To fix it, please check your sets names.</li>
  					  <li>Some image collection have the same name (in your workspace OR between your workspace and the current state of the software). To fix it, please check your image collections names.</li>
          </ul>
        </p>
        </div>
      </div>

			<h2 id="export">5.2 Export an Image Collection</h2>
      <p>
				To export your selected image collection, select the button "Export data" in the main page of the software. This operation let you choose between the export to NIfTI and the export to CSV. The pop-up shown remember you the number of image collection and NIfTI image selected.
			</p>

      <p>
        <img src="imgs/import_export/export_data.png" style="width:80%">
      </p>

			<h3 id="export_nifti">5.2.1 As a NIfTI file</h3>
			<p>
				After this step, to export as a NIfTI file, select the button "Export to NIfTI" and click "Apply". This operation let you choose where you want to save these files.
			</p>
      <p>
				To take less place on the computer, NIfTI images are compressed ("nii.gz").
			</p>
      <p>
        <img src="imgs/import_export/export_to_nifti.png" style="width:80%">
      </p>
      <div style="padding-left: 12%; padding-top:3%; padding-bottom:3%">
        <div class="alert alert-info" role="alert">
        <h5 style="color:#f66;">WARNING</h5>
         <p>This operation will save all the NIfTI files on your computer. Please check that you have enough space on your computer before this operation, to prevent any damage.</p>
		     </div>
      </div>

			<h3 id="export_csv">5.2.2 As a CSV file</h3>
			<p>
				After this step, to export as a CSV file, select the button "Export to CSV" and click to "Apply". An other pop-up will appear. This let you choose between "Export all points" (all the points with an intensity other than 0) and "Export only the centroid of each file". After choosing your export way, click on the "Apply" button and choose where you want to save the CSV file.
			</p>
      <p>
				The first line of the CSV contains the header of each column. These are :
        <ul>
               <li>Origin_file_name : file name of the file associate to voxel. </li>
               <li>X : X coordinate.</li>
               <li>Y : Y coordinate.</li>
               <li>Z : Z coordinate.</li>
               <li>Intensity : voxel intensity.</li>

               </ul>
			</p>

        </div>
      </div>
    </div>

    <footer class="w3-container w3-dark-grey w3-padding-32 w3-margin-top">
      <div class="column-left">
  	     <p>Source code available on <a href="https://github.com/Brain-Mapper/brainMapper" target="_blank">GitHub repository</a></p>
      </div>
      <div>
        <p> <b>Authors</b>: R. Agathon (@yoshcraft), M. Cluchague (@maximeCluchague), G. Husson (@Graziella-Husson), V. Zelaya (@vz-chameleon),
        M. Adler (@MarieAdler), A. Benoit (@BenAur), T. Grassellini (@GrasselliniThomas), L. Martin (@MartinLucie)
      </div>
  	</footer>
  </body>
</html>
